# encoding: UTF-8
# This file is auto-generated from the current state of the database. Instead
# of editing this file, please use the migrations feature of Active Record to
# incrementally modify your database, and then regenerate this schema definition.
#
# Note that this schema.rb definition is the authoritative source for your
# database schema. If you need to create the application database on another
# system, you should be using db:schema:load, not running all the migrations
# from scratch. The latter is a flawed and unsustainable approach (the more migrations
# you'll amass, the slower it'll run and the greater likelihood for issues).
#
# It's strongly recommended that you check this file into your version control system.

<<<<<<< HEAD
ActiveRecord::Schema.define(version: 20141201231139) do
=======
<<<<<<< Updated upstream
ActiveRecord::Schema.define(version: 20141104203657) do
=======
ActiveRecord::Schema.define(version: 20141201234700) do
>>>>>>> Stashed changes
>>>>>>> LHM adds segment to users.

  create_table "accounts", force: true do |t|
    t.string   "name"
    t.integer  "plan_id"
    t.datetime "bill_at"
    t.integer  "downgrade_plan_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "state"
    t.integer  "maximum_votes_per_poll"
    t.integer  "results_counter",                                                       default: 0
    t.integer  "maximum_users"
    t.boolean  "custom_keywords"
    t.decimal  "price",                                        precision: 12, scale: 2, default: 0.0
    t.string   "billing_cycle"
    t.boolean  "reports"
    t.boolean  "custom_confirmations"
    t.boolean  "web_branded"
    t.boolean  "moderation"
    t.boolean  "participant_reporting"
    t.boolean  "sms_confirmations",                                                     default: true
    t.boolean  "sms_broadcasting",                                                      default: false
    t.integer  "sms_broadcast_price"
    t.boolean  "smtp_broadcasting",                                                     default: false
    t.integer  "mt_counter",                                                            default: 0
    t.integer  "broadcast_messages_remaining",                                          default: 0
    t.string   "organization",                     limit: 200
    t.string   "industry"
    t.integer  "keyword_id"
    t.integer  "broadcast_messages_allowed",                                            default: 0
    t.boolean  "premium_keyword_reservations",                                          default: false
    t.boolean  "library_enabled",                                                       default: false
    t.boolean  "full_phone_number_reporting"
    t.integer  "spare_int_1"
    t.boolean  "custom_session_keywords",                                               default: false
    t.boolean  "billing_reminder_enabled",                                              default: false
    t.boolean  "grading",                                                               default: false
    t.boolean  "intro_sms",                                                             default: true,  null: false
    t.decimal  "participant_price",                            precision: 12, scale: 2, default: 0.0,   null: false
    t.integer  "referred_by_user_id"
    t.boolean  "comparison_reporting"
    t.integer  "users_count"
    t.string   "plan_filter_group"
    t.integer  "grandfathered_upgrades_remaining",                                      default: 0,     null: false
    t.boolean  "custom_username",                                                       default: false, null: false
  end

  add_index "accounts", ["plan_id"], name: "index_accounts_on_plan_id", using: :btree
  add_index "accounts", ["referred_by_user_id"], name: "index_accounts_on_referred_by_user_id", using: :btree

  create_table "accumulators", force: true do |t|
    t.integer  "position"
    t.string   "value"
    t.integer  "poll_id",                      null: false
    t.integer  "results_count",    default: 0
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "type"
    t.integer  "group_sequence"
    t.boolean  "correct_response"
    t.integer  "archive_id"
    t.string   "correct"
    t.string   "session_keyword"
  end

  add_index "accumulators", ["archive_id"], name: "index_accumulators_on_archive_id", using: :btree
  add_index "accumulators", ["group_sequence"], name: "sean_test_group_sequence", using: :btree
  add_index "accumulators", ["poll_id", "type", "archive_id", "session_keyword", "position"], name: "index_accumulators_for_session_keyword_lookup", using: :btree

  create_table "announcements", force: true do |t|
    t.text     "body"
    t.datetime "published_at"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "target"
  end

  add_index "announcements", ["published_at"], name: "index_announcements_on_published_at", using: :btree

  create_table "archives", force: true do |t|
    t.integer  "poll_id",    null: false
    t.string   "name"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "archives", ["poll_id"], name: "index_archives_on_poll_id", using: :btree

  create_table "billing_cycles", force: true do |t|
    t.string  "duration"
    t.integer "position"
    t.integer "plan_id",                                         null: false
    t.decimal "price",    precision: 12, scale: 2, default: 0.0
  end

  add_index "billing_cycles", ["plan_id"], name: "index_billing_cycles_on_plan_id", using: :btree

  create_table "boundless_polls", force: true do |t|
    t.integer  "user_id"
    t.integer  "poll_id"
    t.integer  "boundless_question_id"
    t.datetime "created_at"
    t.string   "subject"
    t.string   "chapter"
    t.string   "section"
    t.text     "question"
  end

  add_index "boundless_polls", ["boundless_question_id"], name: "index_boundless_polls_on_boundless_question_id", using: :btree
  add_index "boundless_polls", ["poll_id"], name: "index_boundless_polls_on_poll_id", using: :btree
  add_index "boundless_polls", ["user_id"], name: "index_boundless_polls_on_user_id", using: :btree

  create_table "broadcast_tos", force: true do |t|
    t.datetime "created_at"
    t.datetime "updated_at"
    t.text     "lists"
  end

  create_table "broadcasts", force: true do |t|
    t.string   "targetable_type"
    t.integer  "targetable_id"
    t.integer  "sender_id",                   null: false
    t.string   "message",         limit: 140
    t.integer  "source_id"
    t.string   "state"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.datetime "send_at"
  end

  add_index "broadcasts", ["created_at"], name: "index_broadcasts_on_created_at", using: :btree
  add_index "broadcasts", ["send_at"], name: "index_broadcasts_on_send_at", using: :btree
  add_index "broadcasts", ["sender_id"], name: "index_broadcasts_on_sender_id", using: :btree
  add_index "broadcasts", ["targetable_id", "targetable_type"], name: "index_broadcasts_on_targetable_id_and_targetable_type", using: :btree

  create_table "broadcasts_recipients", force: true do |t|
    t.integer  "broadcast_id",  null: false
    t.integer  "recipient_id",  null: false
    t.string   "error_message"
    t.integer  "list_id"
    t.string   "state"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "broadcasts_recipients", ["broadcast_id", "recipient_id"], name: "index_broadcasts_recipients_on_broadcast_id_and_recipient_id", unique: true, using: :btree
  add_index "broadcasts_recipients", ["broadcast_id", "state"], name: "index_broadcasts_recipients_on_broadcast_id_and_state", using: :btree
  add_index "broadcasts_recipients", ["list_id"], name: "index_broadcasts_recipients_on_list_id", using: :btree
  add_index "broadcasts_recipients", ["recipient_id"], name: "index_broadcasts_recipients_on_recipient_id", using: :btree

  create_table "business_events", force: true do |t|
    t.string   "title"
    t.text     "details"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "subject_id",     null: false
    t.string   "subject_type",   null: false
    t.string   "predicate"
    t.integer  "old_model_id"
    t.string   "old_model_type"
    t.string   "old_value"
    t.integer  "new_model_id"
    t.string   "new_model_type"
    t.string   "new_value"
  end

  add_index "business_events", ["created_at"], name: "index_business_events_on_created_at", using: :btree
  add_index "business_events", ["new_model_id", "new_model_type"], name: "index_business_events_on_new_model_id_and_new_model_type", using: :btree
  add_index "business_events", ["old_model_id", "old_model_type"], name: "index_business_events_on_old_model_id_and_old_model_type", using: :btree
  add_index "business_events", ["subject_id", "subject_type"], name: "index_business_events_on_subject_id_and_subject_type", using: :btree

  create_table "currpoll_stats", force: true do |t|
    t.integer  "user_id",    null: false
    t.integer  "poll_id"
    t.datetime "created_at", null: false
    t.datetime "expires_at"
  end

  create_table "direct_twitters", force: true do |t|
    t.integer  "user_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "twitter_username"
    t.string   "twitter_token"
    t.string   "twitter_secret"
    t.datetime "user_last_authenticated_at"
  end

  add_index "direct_twitters", ["user_id"], name: "index_direct_twitters_on_user_id", unique: true, using: :btree
  add_index "direct_twitters", ["user_last_authenticated_at"], name: "index_direct_twitters_on_user_last_authenticated_at", using: :btree

  create_table "fortune1000", force: true do |t|
    t.string  "year",        limit: 40
    t.integer "rev_rank"
    t.integer "profit_rank"
    t.decimal "revenue",                precision: 10, scale: 2
    t.decimal "profit",                 precision: 10, scale: 2
    t.string  "company"
    t.string  "domain",      limit: 40
  end

  add_index "fortune1000", ["domain"], name: "index_fortune1000_on_domain", using: :btree

  create_table "groups", force: true do |t|
    t.string   "name"
    t.boolean  "collapsed",                   default: false
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "owner_id",                                    null: false
    t.string   "confirmation_type"
    t.string   "custom_confirmation_message"
    t.string   "permalink",                                   null: false
    t.string   "acts_as"
    t.integer  "polls_count",                 default: 0
    t.integer  "next_group_id"
  end

  add_index "groups", ["owner_id"], name: "index_groups_on_owner_id", using: :btree
  add_index "groups", ["permalink"], name: "index_groups_on_permalink", unique: true, using: :btree

  create_table "invitations", force: true do |t|
    t.string   "email"
    t.string   "token"
    t.integer  "account_id",    null: false
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "user_id"
    t.string   "original_user"
  end

  add_index "invitations", ["account_id"], name: "index_invitations_on_account_id", using: :btree
  add_index "invitations", ["token"], name: "index_invitations_on_token", using: :btree
  add_index "invitations", ["user_id"], name: "index_invitations_on_user_id", using: :btree

  create_table "keywords", force: true do |t|
    t.datetime "updated_at"
    t.datetime "created_at"
    t.string   "targetable_type"
    t.integer  "targetable_id"
    t.boolean  "reserved",        default: false
    t.boolean  "auto_generated",  default: false
    t.string   "keyword"
    t.integer  "usage_count"
  end

  add_index "keywords", ["keyword"], name: "index_keywords_on_keyword", unique: true, using: :btree
  add_index "keywords", ["targetable_id", "reserved", "auto_generated"], name: "index_keywords_on_targetable_id_and_reserved_and_auto_generated", using: :btree
  add_index "keywords", ["targetable_id", "targetable_type"], name: "index_keywords_on_targetable_id_and_targetable_type", unique: true, using: :btree

  create_table "lhma_2014_12_02_10_41_09_921_users", force: true do |t|
    t.string   "scrypted_password"
    t.string   "email"
    t.string   "crypted_password",          limit: 40
    t.string   "salt",                      limit: 40
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "first_name"
    t.string   "last_name"
    t.string   "time_zone"
    t.string   "password_reset_token"
    t.string   "session_token"
    t.integer  "service_area_id"
    t.datetime "last_authenticated_at"
    t.string   "unverified_phone_number"
    t.string   "email_type",                                                    default: "html"
    t.boolean  "privacy_enabled",                                               default: false
    t.datetime "last_read_announcement_at"
    t.datetime "mail_list_synced_at"
    t.integer  "current_poll_ttl"
    t.integer  "account_id"
    t.integer  "account_relationship",                                          default: 0,      null: false
    t.integer  "participant_id"
    t.decimal  "participant_paid",                     precision: 12, scale: 2, default: 0.0,    null: false
    t.datetime "participant_expires"
    t.integer  "template_poll_id"
    t.integer  "user_group_id"
    t.boolean  "spare_bool_1",                                                  default: false
    t.boolean  "hide_participants_counter",                                     default: false
    t.integer  "labs_mask",                 limit: 8,                           default: 9
    t.integer  "email_preferences_mask",                                        default: 7,      null: false
  end

  add_index "lhma_2014_12_02_10_41_09_921_users", ["account_id"], name: "index_users_on_account_id", using: :btree
  add_index "lhma_2014_12_02_10_41_09_921_users", ["account_relationship"], name: "index_users_on_account_relationship", using: :btree
  add_index "lhma_2014_12_02_10_41_09_921_users", ["email"], name: "index_users_on_email", unique: true, using: :btree
  add_index "lhma_2014_12_02_10_41_09_921_users", ["participant_id"], name: "index_users_on_participant_id", unique: true, using: :btree
  add_index "lhma_2014_12_02_10_41_09_921_users", ["password_reset_token"], name: "index_users_on_password_reset_token", using: :btree
  add_index "lhma_2014_12_02_10_41_09_921_users", ["session_token"], name: "index_users_on_session_token", unique: true, using: :btree
  add_index "lhma_2014_12_02_10_41_09_921_users", ["unverified_phone_number"], name: "index_users_on_unverified_phone_number", using: :btree
  add_index "lhma_2014_12_02_10_41_09_921_users", ["user_group_id"], name: "index_users_on_user_group_id", using: :btree

  create_table "library_cards", force: true do |t|
    t.string   "publisher"
    t.string   "series"
    t.string   "book_isbn"
    t.string   "book_title"
    t.string   "book_author"
    t.string   "chapter"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "library_cards", ["book_isbn", "publisher", "series", "book_title", "chapter", "book_author"], name: "indexed_library_cards_index_on_fields", type: :fulltext
  add_index "library_cards", ["updated_at"], name: "index_library_cards_on_updated_at", using: :btree

  create_table "lists", force: true do |t|
    t.string   "name",                     limit: 1000
    t.integer  "account_id",                                           null: false
    t.integer  "owner_id",                                             null: false
    t.string   "invitation_text",          limit: 120
    t.integer  "opt_out_count",                         default: 0
    t.datetime "created_at"
    t.datetime "updated_at"
    t.boolean  "subscribable",                          default: true
    t.datetime "deleted_at"
    t.string   "welcome_text",             limit: 160
    t.string   "program_name",             limit: 100
    t.integer  "alert_frequency"
    t.string   "alert_frequency_duration", limit: 16
  end

  add_index "lists", ["account_id"], name: "index_lists_on_account_id", using: :btree
  add_index "lists", ["owner_id"], name: "index_lists_on_owner_id", using: :btree

  create_table "lms_blackboard_connections", force: true do |t|
    t.integer  "account_id"
    t.string   "oauth_consumer_key"
    t.string   "oauth_secret"
    t.string   "tool_consumer_instance_guid"
    t.string   "courses_callback_url"
    t.string   "roster_callback_url"
    t.datetime "created_at",                  null: false
    t.datetime "updated_at",                  null: false
  end

  create_table "lms_blackboard_user_connections", force: true do |t|
    t.integer  "user_id",                      null: false
    t.integer  "lms_blackboard_connection_id", null: false
    t.string   "blackboard_user_id"
    t.datetime "created_at",                   null: false
    t.datetime "updated_at",                   null: false
  end

  create_table "membership_participant_groups", force: true do |t|
    t.integer  "participant_group_id"
    t.integer  "membership_id"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "membership_participant_groups", ["membership_id"], name: "index_membership_participant_groups_on_membership_id", using: :btree
  add_index "membership_participant_groups", ["participant_group_id", "membership_id"], name: "index_mpgroups_on_group_and_membership", unique: true, using: :btree

  create_table "memberships", force: true do |t|
    t.integer  "user_id",                    null: false
    t.integer  "account_id",                 null: false
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "private_data"
    t.string   "responding_as"
    t.datetime "expires_at"
    t.string   "foreign_ids",   limit: 2000
    t.integer  "presenter_id"
  end

  add_index "memberships", ["account_id"], name: "index_memberships_on_account_id", using: :btree
  add_index "memberships", ["presenter_id"], name: "index_memberships_on_presenter_id", using: :btree
  add_index "memberships", ["user_id", "account_id"], name: "index_memberships_on_user_id_and_account_id", using: :btree

  create_table "notes", force: true do |t|
    t.string   "noteable_type"
    t.integer  "noteable_id"
    t.text     "body"
    t.datetime "remind_at"
    t.integer  "author_id",     null: false
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "notes", ["author_id"], name: "index_notes_on_author_id", using: :btree
  add_index "notes", ["noteable_id", "noteable_type"], name: "index_notes_on_noteable_id_and_noteable_type", using: :btree
  add_index "notes", ["remind_at"], name: "index_notes_on_remind_at", using: :btree

  create_table "order_transactions", force: true do |t|
    t.integer  "order_id",   null: false
    t.integer  "amount"
    t.boolean  "success"
    t.string   "reference"
    t.string   "message"
    t.string   "action"
    t.text     "params"
    t.boolean  "test"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "order_transactions", ["order_id"], name: "index_order_transactions_on_order_id", using: :btree

  create_table "orders", force: true do |t|
    t.integer  "quantity"
    t.datetime "created_at"
    t.decimal  "amount",            precision: 12, scale: 2, default: 0.0
    t.string   "description"
    t.string   "state",                                      default: "pending"
    t.integer  "subject_id"
    t.datetime "updated_at"
    t.integer  "payment_method_id"
    t.integer  "user_id"
    t.string   "subject_type",                                                   null: false
  end

  add_index "orders", ["created_at"], name: "index_orders_on_created_at", using: :btree
  add_index "orders", ["payment_method_id"], name: "index_orders_on_payment_method_id", using: :btree
  add_index "orders", ["subject_id", "subject_type"], name: "index_orders_on_subject_id_and_subject_type", using: :btree
  add_index "orders", ["user_id"], name: "index_orders_on_user_id", using: :btree

  create_table "participant_groups", force: true do |t|
    t.string   "name"
    t.integer  "owner_id"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "participant_groups", ["owner_id", "name"], name: "index_participant_groups_on_owner_id_and_name", unique: true, using: :btree

  create_table "participants", force: true do |t|
    t.string   "phone_number"
    t.string   "twitter_username"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "carrier_id"
    t.boolean  "opt_in_to_sms",                 default: true
    t.string   "session",          limit: 1023
  end

  add_index "participants", ["phone_number"], name: "index_participants_on_phone_number", unique: true, using: :btree
  add_index "participants", ["twitter_username"], name: "index_participants_on_twitter_username", using: :btree

  create_table "payment_methods", force: true do |t|
    t.string   "number",          null: false
    t.string   "first_name",      null: false
    t.string   "last_name",       null: false
    t.datetime "expiration_date", null: false
    t.string   "vendor",          null: false
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "remote_id"
    t.string   "zip"
    t.integer  "user_id",         null: false
  end

  add_index "payment_methods", ["user_id"], name: "index_payment_methods_on_user_id", unique: true, using: :btree

  create_table "plan_sets", force: true do |t|
    t.string   "name"
    t.text     "description"
    t.boolean  "self_serviceable",         default: false
    t.string   "permalink"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "excluded_service_area_id"
  end

  add_index "plan_sets", ["permalink"], name: "index_plan_sets_on_permalink", using: :btree

  create_table "plans", force: true do |t|
    t.integer  "maximum_votes_per_poll"
    t.integer  "maximum_votes"
    t.integer  "maximum_users"
    t.boolean  "custom_keywords"
    t.string   "name"
    t.text     "description"
    t.text     "support"
    t.integer  "position"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.boolean  "reports"
    t.boolean  "custom_confirmations",                             default: false
    t.boolean  "web_branded",                                      default: true
    t.boolean  "salable"
    t.boolean  "moderation"
    t.boolean  "participant_reporting",                            default: false
    t.integer  "plan_set_id"
    t.boolean  "self_serviceable",                                 default: true
    t.boolean  "sms_confirmations",                                default: true
    t.boolean  "grading",                                          default: false
    t.decimal  "participant_price",       precision: 12, scale: 2, default: 0.0,   null: false
    t.string   "special_pricing"
    t.boolean  "comparison_reporting"
    t.boolean  "custom_session_keywords",                          default: false, null: false
    t.string   "filter_group"
    t.boolean  "custom_username",                                  default: false, null: false
  end

  create_table "polls", force: true do |t|
    t.integer  "owner_id",                                                   null: false
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "title",                         limit: 1000
    t.string   "permalink"
    t.datetime "opened_at"
    t.integer  "results_count",                              default: 0
    t.string   "type"
    t.string   "confirmation_type"
    t.string   "custom_confirmation_message"
    t.boolean  "running_low_notification_sent"
    t.boolean  "web_enabled",                                default: true
    t.boolean  "sms_enabled",                                default: true
    t.float    "goal",                          limit: 24
    t.datetime "closed_at"
    t.boolean  "released_keywords",                          default: false
    t.boolean  "moderation_enabled",                         default: false
    t.text     "flash_options"
    t.boolean  "registered_participants_only",               default: false
    t.boolean  "privacy_enabled",                            default: false
    t.integer  "account_id"
    t.boolean  "twitter_enabled",                            default: false
    t.integer  "library_card_id"
    t.integer  "opt_in_to_list_id"
    t.integer  "group_id"
    t.float    "sequence",                      limit: 24
    t.boolean  "sharing_enabled",                            default: true
    t.integer  "deductible_results_count",                   default: 0,     null: false
    t.string   "autocensor"
    t.integer  "max_votes"
    t.boolean  "spare_bool_1",                               default: true
    t.boolean  "simple_keywords",                            default: true
    t.boolean  "anonymous",                                  default: false
    t.text     "type_options"
  end

  add_index "polls", ["account_id"], name: "index_polls_on_account_id", using: :btree
  add_index "polls", ["closed_at"], name: "index_polls_on_closed_at", using: :btree
  add_index "polls", ["created_at"], name: "index_polls_on_created_at", using: :btree
  add_index "polls", ["group_id"], name: "index_polls_on_group_id", using: :btree
  add_index "polls", ["library_card_id"], name: "index_polls_on_library_card_id", using: :btree
  add_index "polls", ["opened_at"], name: "index_polls_on_opened_at", using: :btree
  add_index "polls", ["owner_id"], name: "index_polls_on_user_id", using: :btree
  add_index "polls", ["permalink"], name: "index_polls_on_permalink", unique: true, using: :btree
  add_index "polls", ["privacy_enabled"], name: "index_polls_on_privacy_enabled", using: :btree
  add_index "polls", ["title"], name: "index_polls_on_title", type: :fulltext
  add_index "polls", ["updated_at"], name: "index_polls_on_updated_at", using: :btree

  create_table "pre_results", force: true do |t|
    t.integer  "accumulator_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "voter_id",                                        null: false
    t.integer  "poll_id"
    t.string   "value",              limit: 8000
    t.integer  "source_id"
    t.boolean  "approved",                        default: true
    t.string   "additional_message", limit: 8000
    t.boolean  "correct",                         default: false
    t.string   "ip_addr"
    t.string   "user_agent"
    t.boolean  "deductible",                      default: true
  end

  add_index "pre_results", ["poll_id"], name: "index_pre_results_on_poll_id", using: :btree
  add_index "pre_results", ["voter_id"], name: "index_pre_results_on_voter_id", using: :btree

  create_table "redemption_codes", force: true do |t|
    t.datetime "expires_at",    null: false
    t.integer  "batch_id",      null: false
    t.string   "code",          null: false
    t.datetime "redeemed_at"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "duration_str"
    t.integer  "membership_id"
  end

  add_index "redemption_codes", ["batch_id"], name: "index_redemption_codes_on_batch_id", using: :btree
  add_index "redemption_codes", ["code"], name: "index_redemption_codes_on_code", unique: true, using: :btree
  add_index "redemption_codes", ["membership_id"], name: "index_redemption_codes_on_membership_id", using: :btree
  add_index "redemption_codes", ["redeemed_at"], name: "index_redemption_codes_on_redeemed_at", using: :btree

  create_table "results", force: true do |t|
    t.integer  "accumulator_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "voter_id",                                    null: false
    t.integer  "poll_id"
    t.string   "value",          limit: 8000
    t.integer  "source_id"
    t.boolean  "approved"
    t.string   "unused",         limit: 8000
    t.boolean  "correct",                     default: false
    t.string   "ip_addr"
    t.string   "user_agent"
    t.boolean  "deductible",                  default: true,  null: false
  end

  add_index "results", ["accumulator_id"], name: "index_results_on_option_id", using: :btree
  add_index "results", ["created_at"], name: "index_results_on_created_at", using: :btree
  add_index "results", ["poll_id"], name: "index_results_on_poll_id", using: :btree
  add_index "results", ["source_id"], name: "index_results_on_source_id", using: :btree
  add_index "results", ["updated_at"], name: "index_results_on_updated_at", using: :btree
  add_index "results", ["voter_id"], name: "index_results_on_voter_id", using: :btree

  create_table "scheduled_poll_actions", force: true do |t|
    t.integer  "poll_id"
    t.datetime "perform_at"
    t.string   "action"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "scheduled_poll_actions", ["perform_at"], name: "index_scheduled_poll_actions_on_perform_at", using: :btree
  add_index "scheduled_poll_actions", ["poll_id"], name: "index_scheduled_poll_actions_on_poll_id", using: :btree

  create_table "service_areas", force: true do |t|
    t.string   "name"
    t.integer  "source_id",     null: false
    t.text     "notes"
    t.boolean  "public"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.boolean  "default"
    t.text     "country_codes"
  end

  create_table "single_signon_authorizations", force: true do |t|
    t.string  "provider"
    t.string  "uid"
    t.string  "token"
    t.string  "secret"
    t.integer "user_id"
  end

  add_index "single_signon_authorizations", ["uid"], name: "index_single_signon_authorizations_on_uid", using: :btree
  add_index "single_signon_authorizations", ["user_id"], name: "index_single_signon_authorizations_on_user_id", using: :btree

  create_table "subscriptions", force: true do |t|
    t.integer  "subscriber_id",     null: false
    t.integer  "account_id"
    t.integer  "list_id"
    t.string   "state"
    t.integer  "opt_in_source_id"
    t.integer  "opt_in_keyword_id"
    t.datetime "deleted_at"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "subscriptions", ["account_id"], name: "index_subscriptions_on_account_id", using: :btree
  add_index "subscriptions", ["list_id"], name: "index_subscriptions_on_list_id", using: :btree
  add_index "subscriptions", ["subscriber_id"], name: "index_subscriptions_on_subscriber_id", using: :btree

  create_table "user_groups", force: true do |t|
    t.string   "name"
    t.integer  "account_id",                     null: false
    t.boolean  "access_private", default: false
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "user_groups", ["account_id"], name: "index_user_groups_on_account_id", using: :btree

  create_table "user_oauth_credentials", force: true do |t|
    t.integer  "user_id",    null: false
    t.string   "site",       null: false
    t.string   "token"
    t.string   "secret"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  create_table "user_styles", force: true do |t|
    t.integer  "user_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.text     "placeholder_content"
    t.string   "stylesheet_url"
    t.string   "javascript_url"
  end

  add_index "user_styles", ["user_id"], name: "index_user_styles_on_user_id", unique: true, using: :btree

  create_table "users", force: true do |t|
    t.string   "scrypted_password"
    t.string   "email"
    t.string   "crypted_password",          limit: 40
    t.string   "salt",                      limit: 40
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "first_name"
    t.string   "last_name"
    t.string   "time_zone"
    t.string   "password_reset_token"
    t.string   "session_token"
    t.integer  "service_area_id"
    t.datetime "last_authenticated_at"
    t.string   "unverified_phone_number"
    t.string   "email_type",                                                    default: "html"
    t.boolean  "privacy_enabled",                                               default: false
    t.datetime "last_read_announcement_at"
    t.datetime "mail_list_synced_at"
    t.integer  "current_poll_ttl"
    t.integer  "account_id"
    t.integer  "account_relationship",                                          default: 0,      null: false
    t.integer  "participant_id"
    t.decimal  "participant_paid",                     precision: 12, scale: 2, default: 0.0,    null: false
    t.datetime "participant_expires"
    t.integer  "template_poll_id"
    t.integer  "user_group_id"
    t.boolean  "spare_bool_1",                                                  default: false
    t.boolean  "hide_participants_counter",                                     default: false
    t.integer  "labs_mask",                 limit: 8,                           default: 9
    t.integer  "email_preferences_mask",                                        default: 7,      null: false
    t.string   "segment"
  end

  add_index "users", ["account_id"], name: "index_users_on_account_id", using: :btree
  add_index "users", ["account_relationship"], name: "index_users_on_account_relationship", using: :btree
  add_index "users", ["email"], name: "index_users_on_email", unique: true, using: :btree
  add_index "users", ["participant_id"], name: "index_users_on_participant_id", unique: true, using: :btree
  add_index "users", ["password_reset_token"], name: "index_users_on_password_reset_token", using: :btree
  add_index "users", ["session_token"], name: "index_users_on_session_token", unique: true, using: :btree
  add_index "users", ["unverified_phone_number"], name: "index_users_on_unverified_phone_number", using: :btree
  add_index "users", ["user_group_id"], name: "index_users_on_user_group_id", using: :btree

  create_table "votes", force: true do |t|
    t.integer  "value"
    t.integer  "result_id"
    t.integer  "participant_id"
    t.datetime "created_at"
    t.datetime "updated_at"
  end

  add_index "votes", ["result_id", "participant_id"], name: "index_votes_on_result_id_and_participant_id", unique: true, using: :btree

end
